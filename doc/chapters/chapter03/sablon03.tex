% Szglab4
% ===========================================================================
%
\chapter{Analízis modell kidolgozása 1}

\thispagestyle{fancy}

\section{Objektum katalógus}

\comment{Minden, a feladatban szereplő objektum rövid, egy-két bekezdés hosszú ismertetése. Meg kell jelenjen minden objektumhoz, hogy mi a felelőssége. Informális leírás, ezért nem kell foglalkozni az örökléssel, az interfészekkel, az absztrakt osztályokkal, a segédosztályokkal.}

\subsection{Tower}
Ha egy ellenség a hatókörébe ér, akkor elindít egy \textbf{Projectile}-t az irányába, a tüzelési gyakoriságának megfelelő időközönként. Ha több ellenfél van a hatókörében, akkor arra lő, aki a legközelebb van a célhoz.

\subsection{Obstacle}
Ha egy ellenség belelép egy olyan mezőbe, amin van egy \textbf{Obstacle}, akkor azt egy bizonyos mértékben lelassítja, az ellenség fajától függően.

\subsection{Map}
%\comment{Felelősség informális leírása}
A Map a pályát képviseli, melyben NxM darab cella van. A pálya egy külső fájlból betölthető, ami új játék indulásakor fog megtörténni, miután kiválasztja a játékos a pályát. A pálya különböző tulajdonságai is lekérdezhetőek, amelyek majd a kirajzoláshoz kellenek.

\subsection{Tile}
%\comment{Felelősség informális leírása}
A Tile objektumból egy NxM -es tömböt fog tárolni a Map objektum. Ezek a pálya egyes celláit fogják képviselni. Egy cellán lehet maximum egy darab épület, amely vagy egy torony, vagy egy akadály, attól függően, hogy van-e a cellán út, vagy nincsen. A cellán levő épület referenciája lekérhető, vagy ha még nincsen rajta, és a cellára kattintás történik, akkor épül egy megfelelő épület.

 Ha egy cellán van út, akkor lekérdezhető, hogy az a cella milyen távol van a céltól (az utat követve, cellákban mérve). Továbbá azt is tárolva van, és lekérdezhető, hogy az út merre folytatódik (és az ellenségeknek merre kell majd menniük). Ha elágazás van, akkor véletlenszerűen választ irányt és arra küldi az ellenséget (ez minden egyes ellenségre véletlenszerű).

\subsection{Mission}
Egy Mission objektumban lesz eltárolva, hogy milyen ellenségek, mikor és honnan jönnek be a pályára. Ez a három adat majd egy segéd osztályban lesz összefogva, és egy tárolóban lesz tárolva. A játék főciklusa le tudja majd kérdezni a következő ellenséget, melyet az objektum visszaad, ha már elég idő eltelt az előző egység óta (ha nem akkor nem ad vissza egységet).

\subsection{Game}
\comment{Felelősség informális leírása}

Ez a játék logikáját magába foglaló osztály. Számon tartja a pályán lévő ellenfeleket, akadályokat és tornyokat, valamint végrehajtja a kiválasztott misszió által leírt forgatókönyvet, ami alapján az ellenségek érkeznek.

\subsection{EnemyType}
\comment{Felelősség informális leírása}

Leírja egy ellenségtípus (jelen esetben a négy faj: ember, tünde, törp vagy hobbit) tulajdonságait, mint például az alapsebessége és a kezdeti életereje. Minden ellenségnek van egy referenciája egy példányára, amely meghatározza a viselkedését.

\subsection{Enemy}
\comment{Felelősség informális leírása}

Az Enemy osztály példányai egy-egy ellenséget tárolnak. Rendelkeznek típussal (fajjal), pillanatnyi pozícióval, hátralévő életerővel. Az idő haladtával próbálnak végighaladni egy véletlenszerűen választott lehetséges útvonalon.

\section{Statikus struktúra diagramok}
\comment{Az előző alfejezet osztályainak kapcsolatait és publikus metódusait bemutató osztálydiagram(ok). Tipikus hibalehetőségek: csillag-topológia, szigetek.}

\begin{figure}[h]
\begin{center}
%\includegraphics[width=17cm]{chapters/chapter03/example.pdf}
\caption{x}
\label{fig:example1}
\end{center}
\end{figure}


\section{Osztályok leírása}
\comment{Az előző alfejezetben tárgyalt objektumok felelősségének formalizálása attribútumokká, metódusokká. Csak publikus metódusok szerepelhetnek. Ebben az alfejezetben megjelennek az interfészek, az öröklés, az absztrakt osztályok. Segédosztályokra még mindig nincs szükség. Az osztályok ABC sorrendben kövessék egymást. Interfészek esetén az Interfészek, Attribútumok pontok kimaradnak.}

\subsection{Building}
\begin{itemize}
\item Felelősség\\
%\comment{Mi az osztály felelőssége. Kb 1 bekezdés.} \\
Biztosít egy interfészt az épületek számára. Eltárolja az épülethez tartozó varázskövet.
\item Attribútumok
%\\\comment{Milyen attribútumai vannak}
	\begin{itemize}
		\item gem: eltárol egy referenciát egy \textbf{Gem} típusú objektumra, ami meghatározza, hogy az adott épület milyen echant alatt áll.
		\item int human: megadja mekkora a human típusú ellenfelekre kifejtett hatása az épületnek.
		\item int elf: megadja mekkora az elf típusú ellenfelekre kifejtett hatása az épületnek.
		\item int dwarf: megadja mekkora a dwarf típusú ellenfelekre kifejtett hatása az épületnek.
		\item int hobbit: megadja mekkora a hobbit típusú ellenfelekre kifejtett hatása az épületnek.
		\item \textbf{Tile} tile: egy referencia arra a mezőre, ahol az épület található.
	\end{itemize}
\item Metódusok\\
%\comment{Milyen publikus metódusokkal rendelkezik. Metódusonként egy-három mondat arról, hogy a metódus mit csinál.}
	\begin{itemize}
		\item \textbf{Gem} getGem(): visszaadja az épületen található varázskövet
		\item void setGem(\textbf{Gem} gem): beállítja az epületen lévő varázskövet. Ha már volt az épületen varázskő, akkor az előző megszűnik.
		\item void setTile(\textbf{Tile} tile)
		\item \textbf{Tile} getTile()
	\end{itemize}
\end{itemize}

\subsection{Tower}
\begin{itemize}
\item Felelősség\\
Felelős \textbf{Projectile}-ok létrehozásához, azok megfelelő felparaméterezésével. Továbbá felelős azért, hogy \textbf{Projectile}-okat csak a megadott időközönként lőjjön ki.
\item Ősosztályok\\
\textbf{Building}
\item Attribútumok
	\begin{itemize}
		\item interval: milyen időközönként tud a torony lőni.
		\item timeSinceLastFire: mennyi idő telt el az utolsó lövés óta.
	\end{itemize}
\item Metódusok
	\begin{itemize}
		\item \textbf{Projectile} attack(\textbf{Enemy} enemy): kilő egy \textbf{Projectile}-t a paraméterként megkapott ellenségre, majd a visszatérési értékében visszaadja azt. A \textbf{Projectile}-t felparaméterezi az ellenséghez megfelelő sebzési adatokkal.
	\end{itemize}
\end{itemize}

\subsection{Obstacle}
\begin{itemize}
\item Felelősség\\
Felelős \textbf{Projectile}-ok létrehozásához, azok megfelelő felparaméterezésével. Továbbá felelős azért, hogy \textbf{Projectile}-okat csak a megadott időközönként lőjjön ki.
\item Ősosztályok\\
\textbf{Building}
\item Attribútumok\\
		Nincsenek attribútumai.
\item Metódusok
	\begin{itemize}
		\item int getSlowingFactor(\textbf{Enemy} enemy): visszatér azzal az értékkel, amivel az adott ellenfelet lassítja.
	\end{itemize}
\end{itemize}

\subsection{Map}
\begin{itemize}
\item Felelősség\\
%\comment{Mi az osztály felelőssége. Kb 1 bekezdés.}
Tartlamaz az összes cellára referenciát, felelős a kapott fájlból beolvasni a pályát, és felépíteni azt.
\item Ősosztályok\\
%\comment{Mely osztályokból származik (öröklési hierarchia)\newline
%Legősebb osztály $\rightarrow$ Ősosztály2 $\rightarrow$ Ősosztály3...}
-
\item Interfészek\\
%\comment{Mely interfészeket valósítja meg.}
-
\item Attribútumok\\
%\comment{Milyen attribútumai vannak}
	\begin{itemize}
		\item Tile[][]: A pályán található cellák tömbje, a pálya kirajzolásához használható.
	\end{itemize}
\item Metódusok\\
%\comment{Milyen publikus metódusokkal rendelkezik. Metódusonként egy-három mondat arról, hogy a metódus mit csinál.}
	\begin{itemize}
		\item Tile getTileAt(int n, int m): Visszaadja az n-edik sor m-edik oszloban talalható cellát.
		\item void readMapFile(String file): Betölti a kapott elérési útvonalon a fájlt, és felépíti az alapján a pályát.
	\end{itemize}
\end{itemize}


\subsection{Mission}
\begin{itemize}
\item Felelősség\\
%\comment{Mi az osztály felelőssége. Kb 1 bekezdés.}
Felelőssége, felépíteni a listát, amely a beérkező ellenségeket és időzítésüket tartalmazza. Majd a megfelelő időközönként ki kell adja ezeket az egységeket a Game osztálynak.
\item Ősosztályok\\
%\comment{Mely osztályokból származik (öröklési hierarchia)\newline
%Legősebb osztály $\rightarrow$ Ősosztály2 $\rightarrow$ Ősosztály3...}
-
\item Interfészek\\
%\comment{Mely interfészeket valósítja meg.}
-
\item Attribútumok\\
%\comment{Milyen attribútumai vannak}
	\begin{itemize}
		\item List<Spawn> spawnList: a Spawn segédosztályban tárolt ellenség-idő-belépési pont, adatokat tárolja.
		\item int counter: méri az előző ellenség megjelenése óta eltelt ciklusokat.
	\end{itemize}
\item Metódusok\\
%\comment{Milyen publikus metódusokkal rendelkezik. Metódusonként egy-három mondat arról, hogy a metódus mit csinál.}
	\begin{itemize}
		\item Enemy getNextEnemy(): a spawnList listaból a következő elemet megvizsgaálja, és ha elegendő ciklus eltelt az előző ellenség megjelenése óta, akkor visszatér a kivett Spawn ellenségével.
		\item void readMissionFile(String file): Betölti a kapott elérési útvonalon a fájlt, és felépíti az alapján a listát (spawnList).
	\end{itemize}
\end{itemize}


\subsection{Tile}
\begin{itemize}
\item Felelősség\\
%\comment{Mi az osztály felelőssége. Kb 1 bekezdés.}
Egy cellán lehet maximum egy darab épület, amely vagy egy torony, vagy egy akadály, attól függően, hogy van-e a cellán út, vagy nincsen. A cellán levő épület referenciája lekérhető, vagy ha még nincsen rajta, és a cellára kattintás történik, akkor épül egy megfelelő épület. Felelős még az egyes ellenségek következő irányának a meghatározására, és vissza kell tudnia adni, hogy van-e rajta út, valamint ha van akkor milyen távol van a céltól.
\item Ősosztályok\\
%\comment{Mely osztályokból származik (öröklési hierarchia)\newline
%Legősebb osztály $\rightarrow$ Ősosztály2 $\rightarrow$ Ősosztály3...}
-
\item Interfészek\\
%\comment{Mely interfészeket valósítja meg.}
-
\item Attribútumok\\
%\comment{Milyen attribútumai vannak}
	\begin{itemize}
		\item Building building: a cellában levő epület.
		\item int distance: hányadik cella az utat követve a céltól.
		\item bool road: van-e út a cellában.
		\item double up: annak a valószinűsége, hogy a cellából felfelé fog menni az ellenség.
		\item double down: annak a valószinűsége, hogy a cellából lefelé fog menni az ellenség.
		\item double left: annak a valószinűsége, hogy a cellából balra fog menni az ellenség.
		\item double right: annak a valószinűsége, hogy a cellából jobbra fog menni az ellenség.
	\end{itemize}
\item Metódusok\\
%\comment{Milyen publikus metódusokkal rendelkezik. Metódusonként egy-három mondat arról, hogy a metódus mit csinál.}
	\begin{itemize}
		\item void build(): a cellára történő egérnyomás hatására meghívódik, és létrehoz ezen a cellán egy tornyot ha nincsen út és egy akadályt, ha van. Ezután, ha tornyot épített, akkor meghívja a Game ... metódusát.
		%\item void enchant:
		\item int getDistance(): vissza adja a distance értékét.
		\item bool isRoad(): vissza adja a road értékét.
		\item direction nextDirection(): visszad egy irány enum-ot, amely megadja az ellenség irányát.
		\item getBuilding(): visszatér a building referenciájával.
	\end{itemize}
\end{itemize}

\subsection{Game}
\begin{itemize}
\item Felelősség\\
A többi osztály nyilván tartása és összekötése, a játékbeli események vezérlése. A felhasználói felülettől érkező parancsok végrehajtása, és a játék állapotának rendelkezésre bocsájtása a kijelzéshez.

\item Attribútumok\\
%\comment{Milyen attribútumai vannak}
	\begin{itemize}
		\item ArrayList<Projectile> projectiles: Eltárolja a jelenleg játékban lévő lövedékeket.
		\item Map map: Referencia a kiválasztott pályára, amin a játék folyik.
		\item Mission mission: Referencia a kiválasztott misszióra, amely alapján zajlik a játék.
		\item ArrayList<Building> buildings: Eltárolja a játékos megépített tornyait.
		\item ArrayList<Gem> gems: Az összes lehetséges, toronyra illetve akadályra rakható varázskő nyilvántartása.
		\item ArrayList<EnemyType> types: Ez a lehetséges ellenségtípusok listája.
		\item ArrayList<Enemy> enemies: Az összes éppen látható ellenség található meg benne.
	\end{itemize}
\item Metódusok\\
%\comment{Milyen publikus metódusokkal rendelkezik. Metódusonként egy-három mondat arról, hogy a metódus mit csinál.}
	\begin{itemize}
		\item void run(): Ez a metódus futtatja a főciklust, amelyben maga a játék működik.
		\item void buildTower(Tile tile): Épít egy tornyot a paraméterül kapott mezőre. \comment{Esetleg koordinátákkal adjuk meg?}
		\item void buildObstacle(Tile tile): Épít egy akadályt a paraméterül kapott mezőre. \comment{Esetleg koordinátákkal adjuk meg?}
		\item \comment{\textbf{TODO}, ez még hiányos.}
	\end{itemize}
\end{itemize}

\subsection{EnemyType}
\begin{itemize}
\item Felelősség\\
Leírja egy bizonyos típusú (fajú) ellenség alapvető tulajdonságait. Egy-egy példányára hivatkozik az összes ellenség, amelyeknek ezáltal meghatározza a viselkedését.

\item Attribútumok\\
%\comment{Milyen attribútumai vannak}
	\begin{itemize}
		\item int initialHealth: Az ilyen fajtájú ellenségek kezdeti életereje.
		\item double normalSpeed: Az ilyen fajtájú ellenségek akadályoztatás nélküli haladási sebessége.
		\item \comment{\textbf{TODO}, meg akkor az enum típus, hogy miféle?}
	\end{itemize}
\item Metódusok\\
%\comment{Milyen publikus metódusokkal rendelkezik. Metódusonként egy-három mondat arról, hogy a metódus mit csinál.}
	\begin{itemize}
		\item int getInitialHealth(): Visszaadja az initialHealth attribútum értékét.
		\item double getNormalSpeed(): Visszaadja a normalSpeed attribútum értékét.
	\end{itemize}
\end{itemize}

\subsection{Enemy}
\begin{itemize}
\item Felelősség\\

\item Attribútumok\\
%\comment{Milyen attribútumai vannak}
	\begin{itemize}
		\item EnemyType type: Az egység típusa.
		\item int health: Az ellenség fennmaradó életereje.
		\item Vector<Double> position: Pillanatnyi pozíció a pályán.
	\end{itemize}
\item Metódusok\\
%\comment{Milyen publikus metódusokkal rendelkezik. Metódusonként egy-három mondat arról, hogy a metódus mit csinál.}
	\begin{itemize}
		\item void move(): Az egységet annyival mozgatja az útján tovább, amennyit egy időegység alatt halad.
		\item Vector<Double> getPosition(): A position attribútum értékével tér vissza.
		\comment{\textbf{TODO}: Kell ide még más?}
	\end{itemize}
\end{itemize}

\section{Statikus struktúra diagramok}
\comment{Az előző alfejezet osztályainak kapcsolatait és publikus metódusait bemutató osztálydiagram(ok). Tipikus hibalehetőségek: csillag-topológia, szigetek.}

\begin{figure}[h]
\begin{center}
%\includegraphics[width=17cm]{chapters/chapter03/example.pdf}
\caption{x}
\label{fig:example1}
\end{center}
\end{figure}

\section{Szekvencia diagramok}
\comment{Inicializálásra, use-case-ekre, belső működésre. Konzisztens kell legyen az előző alfejezettel. Minden metódus, ami ott szerepel, fel kell tűnjön valamelyik szekvenciában. Minden metódusnak, ami szekvenciában szerepel, szereplnie kell a valamelyik osztálydiagramon.}

\begin{figure}[h]
\begin{center}
%\includegraphics[width=17cm]{chapters/chapter03/example.pdf}
\caption{x}
\label{fig:example2}
\end{center}
\end{figure}

\section{State-chartok}
\comment{Csak azokhoz az osztályokhoz, ahol van értelme. Egyetlen állapotból álló state-chartok ne szerepeljenek. A játék működését bemutató state-chart-ot készíteni tilos.}

\begin{figure}[h]
\begin{center}
%\includegraphics[width=17cm]{chapters/chapter03/example.pdf}
\caption{x}
\label{fig:example3}
\end{center}
\end{figure}

